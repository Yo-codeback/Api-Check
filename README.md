# API 監控中心

一個專為手機螢幕優化的API監控系統，具有即時警報功能。

## 功能特色

### 📱 手機優化
- **響應式設計**: 專為手機螢幕（2412×1080）優化
- **全螢幕支援**: 點擊頁面自動進入全螢幕模式
- **觸控優化**: 所有按鈕和元素都經過觸控優化
- **防止縮放**: 禁用使用者縮放以確保最佳顯示效果

### 🚨 警報系統
- **即時警報**: 當API連線失敗時自動觸發警報
- **音頻警報**: 每10秒播放一次警報音
- **視覺警報**: 紅色閃爍覆蓋層顯示警報訊息
- **連線狀態指示器**: 右上角顯示即時連線狀態

### 📊 監控功能
- **即時狀態**: 顯示API連線狀態
- **統計資料**: 成功/失敗次數、成功率等
- **系統資訊**: 運行時間、系統版本等
- **自動更新**: 每30秒自動更新資料

## 警報觸發條件

1. **API連線異常**: 連續2次API檢查失敗
2. **伺服器連線錯誤**: 前端無法連接到後端伺服器
3. **HTTP錯誤**: 伺服器回應非200狀態碼

## 使用方法

### 啟動服務
```bash
python app.py
```

### 訪問頁面
- **主頁面**: `http://localhost:5000/`
- **測試頁面**: `http://localhost:5000/test`
- **簡化頁面**: `http://localhost:5000/simple`

### 測試警報功能
1. 訪問 `/test` 頁面
2. 點擊「測試警報音」測試音頻
3. 點擊「測試警報畫面」測試視覺警報
4. 點擊「模擬連線錯誤」測試完整警報流程

## 技術規格

### 前端技術
- HTML5 + CSS3 + JavaScript
- Web Audio API (警報音)
- Fullscreen API (全螢幕)
- Fetch API (資料更新)

### 後端技術
- Python Flask
- 多執行緒監控
- RESTful API

### 音頻規格
- 頻率: 800Hz → 600Hz → 800Hz
- 持續時間: 0.5秒
- 音量: 30%
- 重複間隔: 10秒

## 配置檔案

主要配置在 `config.py` 中：
- `API_URL`: 要監控的API網址
- `CHECK_INTERVAL`: 檢查間隔（秒）
- `SYSTEM_VERSION`: 系統版本

## 部署

### 本地部署
```bash
pip install -r requirements.txt
python app.py
```

### 雲端部署
支援部署到 Render、Heroku 等平台，詳見 `render.yaml` 和 `Procfile`。

## 注意事項

1. **音頻權限**: 首次使用時需要允許瀏覽器播放音頻
2. **全螢幕**: 需要使用者手動點擊頁面進入全螢幕
3. **網路連線**: 確保手機網路連線穩定
4. **瀏覽器支援**: 建議使用 Chrome 或 Safari

## 故障排除

### 警報音不響
- 檢查瀏覽器音頻權限
- 確認音量設定
- 檢查音頻上下文狀態

### 連線錯誤
- 檢查後端服務是否運行
- 確認網路連線
- 查看瀏覽器開發者工具錯誤訊息

### 全螢幕不工作
- 確認瀏覽器支援 Fullscreen API
- 檢查是否有其他全螢幕應用程式運行 